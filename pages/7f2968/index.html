<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>图像检索orReID 竞赛的 Tricks | Muyun99&#39;s wiki</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.bdefdc95.css" as="style"><link rel="preload" href="/assets/js/app.2164cc85.js" as="script"><link rel="preload" href="/assets/js/2.3a0f33d3.js" as="script"><link rel="preload" href="/assets/js/103.e0fad8e4.js" as="script"><link rel="prefetch" href="/assets/js/10.5f46a7f2.js"><link rel="prefetch" href="/assets/js/100.46109e18.js"><link rel="prefetch" href="/assets/js/101.0826705d.js"><link rel="prefetch" href="/assets/js/102.5129cfd9.js"><link rel="prefetch" href="/assets/js/104.612f9d15.js"><link rel="prefetch" href="/assets/js/105.8f0d5447.js"><link rel="prefetch" href="/assets/js/106.59c5fbc8.js"><link rel="prefetch" href="/assets/js/107.bebb8c9f.js"><link rel="prefetch" href="/assets/js/108.73079467.js"><link rel="prefetch" href="/assets/js/109.7e815f7f.js"><link rel="prefetch" href="/assets/js/11.ba219e7b.js"><link rel="prefetch" href="/assets/js/110.6d8ffbe6.js"><link rel="prefetch" href="/assets/js/111.0531213b.js"><link rel="prefetch" href="/assets/js/112.f2c859c0.js"><link rel="prefetch" href="/assets/js/113.bc71ae69.js"><link rel="prefetch" href="/assets/js/114.26822f49.js"><link rel="prefetch" href="/assets/js/115.6512eecb.js"><link rel="prefetch" href="/assets/js/116.e224aaba.js"><link rel="prefetch" href="/assets/js/117.05e718a6.js"><link rel="prefetch" href="/assets/js/118.597ca212.js"><link rel="prefetch" href="/assets/js/119.5da78682.js"><link rel="prefetch" href="/assets/js/12.92eba91b.js"><link rel="prefetch" href="/assets/js/120.e581a0ee.js"><link rel="prefetch" href="/assets/js/121.be2c67fc.js"><link rel="prefetch" href="/assets/js/122.70e6b4e5.js"><link rel="prefetch" href="/assets/js/123.8296bcad.js"><link rel="prefetch" href="/assets/js/124.219f9074.js"><link rel="prefetch" href="/assets/js/125.42980d68.js"><link rel="prefetch" href="/assets/js/126.e0470fe1.js"><link rel="prefetch" href="/assets/js/127.2614a3ff.js"><link rel="prefetch" href="/assets/js/128.3894968d.js"><link rel="prefetch" href="/assets/js/129.bfd89640.js"><link rel="prefetch" href="/assets/js/13.41875a03.js"><link rel="prefetch" href="/assets/js/130.ca6af328.js"><link rel="prefetch" href="/assets/js/131.ce3547e9.js"><link rel="prefetch" href="/assets/js/132.c7adae59.js"><link rel="prefetch" href="/assets/js/133.7b148e67.js"><link rel="prefetch" href="/assets/js/134.26ce87d7.js"><link rel="prefetch" href="/assets/js/135.c0e6a63b.js"><link rel="prefetch" href="/assets/js/136.a846f868.js"><link rel="prefetch" href="/assets/js/137.01ef0c79.js"><link rel="prefetch" href="/assets/js/138.25845e03.js"><link rel="prefetch" href="/assets/js/139.f87d8dfb.js"><link rel="prefetch" href="/assets/js/14.4ea6e58b.js"><link rel="prefetch" href="/assets/js/140.a1e0adb4.js"><link rel="prefetch" href="/assets/js/141.8d294e46.js"><link rel="prefetch" href="/assets/js/142.f31a107d.js"><link rel="prefetch" href="/assets/js/143.962c12e1.js"><link rel="prefetch" href="/assets/js/144.3e126a2f.js"><link rel="prefetch" href="/assets/js/145.e872c634.js"><link rel="prefetch" href="/assets/js/146.ca3b3894.js"><link rel="prefetch" href="/assets/js/147.4ea23a80.js"><link rel="prefetch" href="/assets/js/148.4913751c.js"><link rel="prefetch" href="/assets/js/149.674df5e3.js"><link rel="prefetch" href="/assets/js/15.6315eebb.js"><link rel="prefetch" href="/assets/js/150.afbba495.js"><link rel="prefetch" href="/assets/js/151.244001f4.js"><link rel="prefetch" href="/assets/js/152.2138506a.js"><link rel="prefetch" href="/assets/js/153.096b6935.js"><link rel="prefetch" href="/assets/js/154.e3cfefa3.js"><link rel="prefetch" href="/assets/js/155.f7b4183e.js"><link rel="prefetch" href="/assets/js/156.d45d8fd9.js"><link rel="prefetch" href="/assets/js/157.fc653f4e.js"><link rel="prefetch" href="/assets/js/158.cad10f7d.js"><link rel="prefetch" href="/assets/js/159.adae05f6.js"><link rel="prefetch" href="/assets/js/16.a45707b9.js"><link rel="prefetch" href="/assets/js/160.828f88c1.js"><link rel="prefetch" href="/assets/js/161.20f3e039.js"><link rel="prefetch" href="/assets/js/162.cba07e9b.js"><link rel="prefetch" href="/assets/js/163.7783a35f.js"><link rel="prefetch" href="/assets/js/164.d3618df9.js"><link rel="prefetch" href="/assets/js/165.b2823237.js"><link rel="prefetch" href="/assets/js/166.11c27ec7.js"><link rel="prefetch" href="/assets/js/167.1b89c7f0.js"><link rel="prefetch" href="/assets/js/168.70c6c64f.js"><link rel="prefetch" href="/assets/js/169.73a1cf13.js"><link rel="prefetch" href="/assets/js/17.84b8189a.js"><link rel="prefetch" href="/assets/js/170.6529cd0e.js"><link rel="prefetch" href="/assets/js/171.eca471df.js"><link rel="prefetch" href="/assets/js/172.c37b1d1b.js"><link rel="prefetch" href="/assets/js/173.01d9640c.js"><link rel="prefetch" href="/assets/js/174.39b4e30a.js"><link rel="prefetch" href="/assets/js/175.42d99e11.js"><link rel="prefetch" href="/assets/js/176.66f3bf94.js"><link rel="prefetch" href="/assets/js/177.2f72339e.js"><link rel="prefetch" href="/assets/js/178.157bc1aa.js"><link rel="prefetch" href="/assets/js/179.f5fa8abc.js"><link rel="prefetch" href="/assets/js/18.7ef19f81.js"><link rel="prefetch" href="/assets/js/180.2d524cfa.js"><link rel="prefetch" href="/assets/js/181.94dd9ddd.js"><link rel="prefetch" href="/assets/js/182.e974805c.js"><link rel="prefetch" href="/assets/js/183.798e5d4f.js"><link rel="prefetch" href="/assets/js/184.6a8c5be6.js"><link rel="prefetch" href="/assets/js/185.18142647.js"><link rel="prefetch" href="/assets/js/186.84160426.js"><link rel="prefetch" href="/assets/js/187.49ee8f2f.js"><link rel="prefetch" href="/assets/js/188.836016f5.js"><link rel="prefetch" href="/assets/js/189.ff83730a.js"><link rel="prefetch" href="/assets/js/19.fe8ba7a9.js"><link rel="prefetch" href="/assets/js/190.c7e999fe.js"><link rel="prefetch" href="/assets/js/191.fb777610.js"><link rel="prefetch" href="/assets/js/192.fe572b1a.js"><link rel="prefetch" href="/assets/js/193.ebbb0341.js"><link rel="prefetch" href="/assets/js/194.fc098f07.js"><link rel="prefetch" href="/assets/js/195.bdb2ad5c.js"><link rel="prefetch" href="/assets/js/196.e868eaa0.js"><link rel="prefetch" href="/assets/js/197.79638251.js"><link rel="prefetch" href="/assets/js/198.9c32057b.js"><link rel="prefetch" href="/assets/js/199.5fbb8d5a.js"><link rel="prefetch" href="/assets/js/20.6b22eb76.js"><link rel="prefetch" href="/assets/js/200.fd915906.js"><link rel="prefetch" href="/assets/js/201.deb6d35c.js"><link rel="prefetch" href="/assets/js/202.4b0e4bb8.js"><link rel="prefetch" href="/assets/js/203.9cb27cec.js"><link rel="prefetch" href="/assets/js/204.9772dbfe.js"><link rel="prefetch" href="/assets/js/205.46709f69.js"><link rel="prefetch" href="/assets/js/206.8838ac9a.js"><link rel="prefetch" href="/assets/js/207.1207b594.js"><link rel="prefetch" href="/assets/js/208.9d545170.js"><link rel="prefetch" href="/assets/js/209.48cef5cc.js"><link rel="prefetch" href="/assets/js/21.2b69be72.js"><link rel="prefetch" href="/assets/js/210.35875a85.js"><link rel="prefetch" href="/assets/js/211.1ef507f5.js"><link rel="prefetch" href="/assets/js/212.e40db2e4.js"><link rel="prefetch" href="/assets/js/213.5d5b825b.js"><link rel="prefetch" href="/assets/js/214.e0167929.js"><link rel="prefetch" href="/assets/js/215.b3dacfbe.js"><link rel="prefetch" href="/assets/js/216.6a6b8867.js"><link rel="prefetch" href="/assets/js/217.ad89b973.js"><link rel="prefetch" href="/assets/js/218.e6c353a0.js"><link rel="prefetch" href="/assets/js/219.78d57472.js"><link rel="prefetch" href="/assets/js/22.a171d265.js"><link rel="prefetch" href="/assets/js/220.0587014d.js"><link rel="prefetch" href="/assets/js/221.b02bd13b.js"><link rel="prefetch" href="/assets/js/222.77d7b68d.js"><link rel="prefetch" href="/assets/js/223.989fa28e.js"><link rel="prefetch" href="/assets/js/224.f26de2a0.js"><link rel="prefetch" href="/assets/js/225.3d0828ec.js"><link rel="prefetch" href="/assets/js/226.194d710e.js"><link rel="prefetch" href="/assets/js/227.f9768256.js"><link rel="prefetch" href="/assets/js/228.41593a37.js"><link rel="prefetch" href="/assets/js/229.6a592fa1.js"><link rel="prefetch" href="/assets/js/23.d812c568.js"><link rel="prefetch" href="/assets/js/230.3c6fdea6.js"><link rel="prefetch" href="/assets/js/231.0fc24bb2.js"><link rel="prefetch" href="/assets/js/232.f381122a.js"><link rel="prefetch" href="/assets/js/233.d1d5bacf.js"><link rel="prefetch" href="/assets/js/234.4af5f5d4.js"><link rel="prefetch" href="/assets/js/235.f252f22f.js"><link rel="prefetch" href="/assets/js/236.7de67ddb.js"><link rel="prefetch" href="/assets/js/237.47ced467.js"><link rel="prefetch" href="/assets/js/238.1a33fd51.js"><link rel="prefetch" href="/assets/js/239.b696499c.js"><link rel="prefetch" href="/assets/js/24.72ac623b.js"><link rel="prefetch" href="/assets/js/240.16d96df4.js"><link rel="prefetch" href="/assets/js/241.691185aa.js"><link rel="prefetch" href="/assets/js/242.377e1fd2.js"><link rel="prefetch" href="/assets/js/243.4ed38de5.js"><link rel="prefetch" href="/assets/js/244.586adc48.js"><link rel="prefetch" href="/assets/js/245.11f2a36a.js"><link rel="prefetch" href="/assets/js/246.1ddf3941.js"><link rel="prefetch" href="/assets/js/247.d25ea987.js"><link rel="prefetch" href="/assets/js/248.71958f1a.js"><link rel="prefetch" href="/assets/js/25.fb468557.js"><link rel="prefetch" href="/assets/js/26.e7dda852.js"><link rel="prefetch" href="/assets/js/27.467f0322.js"><link rel="prefetch" href="/assets/js/28.426290bc.js"><link rel="prefetch" href="/assets/js/29.225ecc7e.js"><link rel="prefetch" href="/assets/js/3.15429d0b.js"><link rel="prefetch" href="/assets/js/30.fa7560f8.js"><link rel="prefetch" href="/assets/js/31.a8fc66f3.js"><link rel="prefetch" href="/assets/js/32.ac50becc.js"><link rel="prefetch" href="/assets/js/33.59608a34.js"><link rel="prefetch" href="/assets/js/34.68a0dbe3.js"><link rel="prefetch" href="/assets/js/35.6336ae0a.js"><link rel="prefetch" href="/assets/js/36.f9d748d4.js"><link rel="prefetch" href="/assets/js/37.85b39d58.js"><link rel="prefetch" href="/assets/js/38.b2d7cfc8.js"><link rel="prefetch" href="/assets/js/39.8c3fc57c.js"><link rel="prefetch" href="/assets/js/4.1cd3e40a.js"><link rel="prefetch" href="/assets/js/40.b67b358c.js"><link rel="prefetch" href="/assets/js/41.c5473fd5.js"><link rel="prefetch" href="/assets/js/42.12286784.js"><link rel="prefetch" href="/assets/js/43.758498fe.js"><link rel="prefetch" href="/assets/js/44.621d6d70.js"><link rel="prefetch" href="/assets/js/45.7344cb95.js"><link rel="prefetch" href="/assets/js/46.02c79e51.js"><link rel="prefetch" href="/assets/js/47.bc1cde90.js"><link rel="prefetch" href="/assets/js/48.00eb4363.js"><link rel="prefetch" href="/assets/js/49.e0368bdc.js"><link rel="prefetch" href="/assets/js/5.1ef7651e.js"><link rel="prefetch" href="/assets/js/50.11151480.js"><link rel="prefetch" href="/assets/js/51.39f64147.js"><link rel="prefetch" href="/assets/js/52.58c3f1e5.js"><link rel="prefetch" href="/assets/js/53.3689ff3f.js"><link rel="prefetch" href="/assets/js/54.9a425b4c.js"><link rel="prefetch" href="/assets/js/55.d5837e6a.js"><link rel="prefetch" href="/assets/js/56.4f6a4a6d.js"><link rel="prefetch" href="/assets/js/57.78ad9bd8.js"><link rel="prefetch" href="/assets/js/58.7a4a19db.js"><link rel="prefetch" href="/assets/js/59.3cd8b88a.js"><link rel="prefetch" href="/assets/js/6.f2219599.js"><link rel="prefetch" href="/assets/js/60.5dfcb925.js"><link rel="prefetch" href="/assets/js/61.50246c0b.js"><link rel="prefetch" href="/assets/js/62.94b3d244.js"><link rel="prefetch" href="/assets/js/63.5d1c7582.js"><link rel="prefetch" href="/assets/js/64.7e504dbe.js"><link rel="prefetch" href="/assets/js/65.0ab7d7f5.js"><link rel="prefetch" href="/assets/js/66.9b1e5832.js"><link rel="prefetch" href="/assets/js/67.a49a0072.js"><link rel="prefetch" href="/assets/js/68.89a2cdb9.js"><link rel="prefetch" href="/assets/js/69.7c51a497.js"><link rel="prefetch" href="/assets/js/7.24d16974.js"><link rel="prefetch" href="/assets/js/70.fa17088f.js"><link rel="prefetch" href="/assets/js/71.652bc609.js"><link rel="prefetch" href="/assets/js/72.a8b644d6.js"><link rel="prefetch" href="/assets/js/73.96493a6a.js"><link rel="prefetch" href="/assets/js/74.6e32cc3b.js"><link rel="prefetch" href="/assets/js/75.5575a872.js"><link rel="prefetch" href="/assets/js/76.553e4468.js"><link rel="prefetch" href="/assets/js/77.78664d5a.js"><link rel="prefetch" href="/assets/js/78.4e68102a.js"><link rel="prefetch" href="/assets/js/79.26a5da26.js"><link rel="prefetch" href="/assets/js/8.0fc65535.js"><link rel="prefetch" href="/assets/js/80.628040bb.js"><link rel="prefetch" href="/assets/js/81.f8aa9e53.js"><link rel="prefetch" href="/assets/js/82.4d269dab.js"><link rel="prefetch" href="/assets/js/83.e451c303.js"><link rel="prefetch" href="/assets/js/84.76bc15ac.js"><link rel="prefetch" href="/assets/js/85.52941df8.js"><link rel="prefetch" href="/assets/js/86.9afbfc8c.js"><link rel="prefetch" href="/assets/js/87.da83cc25.js"><link rel="prefetch" href="/assets/js/88.f2829fa6.js"><link rel="prefetch" href="/assets/js/89.cb138ae1.js"><link rel="prefetch" href="/assets/js/9.a6c1a71e.js"><link rel="prefetch" href="/assets/js/90.8192237b.js"><link rel="prefetch" href="/assets/js/91.109a9a1b.js"><link rel="prefetch" href="/assets/js/92.ffdd8c48.js"><link rel="prefetch" href="/assets/js/93.ffbf1b0a.js"><link rel="prefetch" href="/assets/js/94.d50a2400.js"><link rel="prefetch" href="/assets/js/95.8db673cc.js"><link rel="prefetch" href="/assets/js/96.9071a7e6.js"><link rel="prefetch" href="/assets/js/97.0f525bfd.js"><link rel="prefetch" href="/assets/js/98.dccba0c1.js"><link rel="prefetch" href="/assets/js/99.ba1fcb5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bdefdc95.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="Muyun99's wiki" class="logo"> <span class="site-name can-hide">Muyun99's wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/research/" class="nav-link">学术搬砖</a></div><div class="nav-item"><a href="/notes/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活杂谈</a></div><div class="nav-item"><a href="/wiki/" class="nav-link">wiki搬运</a></div><div class="nav-item"><a href="/resources/" class="nav-link">资源收藏</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/tutou.jpg"> <div class="blogger-info"><h3>Muyun99</h3> <span>努力成为一个善良的人</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/research/" class="nav-link">学术搬砖</a></div><div class="nav-item"><a href="/notes/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活杂谈</a></div><div class="nav-item"><a href="/wiki/" class="nav-link">wiki搬运</a></div><div class="nav-item"><a href="/resources/" class="nav-link">资源收藏</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码实践-目标检测</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码实践-图像分割</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码实践-自监督学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>竞赛笔记-视觉竞赛</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/86aedf/" class="sidebar-link">当我们在谈论图像竞赛EDA时在谈论些什么</a></li><li><a href="/pages/e518f8/" class="sidebar-link">kaggle-Classify Leaves 竞赛方案学习</a></li><li><a href="/pages/7f2968/" aria-current="page" class="active sidebar-link">图像检索orReID 竞赛的 Tricks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/7f2968/#bag-of-tricks-and-a-strong-baseline-for-deep-person-re-identification" class="sidebar-link">Bag of Tricks and A Strong Baseline for Deep Person Re-identification</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/7f2968/#_01、标准的-baseline-github" class="sidebar-link">01、标准的 Baseline（github）</a></li><li class="sidebar-sub-header"><a href="/pages/7f2968/#_02、训练技巧" class="sidebar-link">02、训练技巧</a></li><li class="sidebar-sub-header"><a href="/pages/7f2968/#_03、实验分析" class="sidebar-link">03、实验分析</a></li><li class="sidebar-sub-header"><a href="/pages/7f2968/#_04、参考资料" class="sidebar-link">04、参考资料</a></li><li class="sidebar-sub-header"><a href="/pages/7f2968/#_05、华为-digix-算法比赛方案学习" class="sidebar-link">05、华为 DIGIX 算法比赛方案学习</a></li></ul></li></ul></li><li><a href="/pages/9f35c1/" class="sidebar-link">kaggle-CowBoy Outfits Detection 竞赛方案学习</a></li><li><a href="/pages/31d8c4/" class="sidebar-link">kaggle 图像分割竞赛学习</a></li><li><a href="/pages/e4a923/" class="sidebar-link">few-shot learning 竞赛学习</a></li><li><a href="/pages/8432b6/" class="sidebar-link">few-shot learning 竞赛学习-2</a></li><li><a href="/pages/59507a/" class="sidebar-link">遥感图像建筑物变化检测竞赛学习-1</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架解析-mmlab系列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>讲座记录-有意思的文章集合</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>体会感悟-产品沉思录观后有感</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>体会感悟-摄影</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-乐理和五线谱</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-爬虫实践</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-Django学习笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-Git 使用笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-网站搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-图卷积网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程笔记-MIT-NULL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-OpenCV-Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-使用 Beancount 记账</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-Python设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-MLOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-Apollo自动驾驶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-PaddlePaddle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系列笔记-视频操作</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue+Django前后端分离开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度学习及机器学习理论知识学习笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PyTorch Tricks</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/notes" title="学习笔记-目录页" data-v-33863c7e>学习笔记</a></li> <li data-v-33863c7e><a href="/notes/#竞赛笔记-视觉竞赛" title="学习笔记#竞赛笔记-视觉竞赛" data-v-33863c7e>竞赛笔记-视觉竞赛</a></li> <!----></ul> <div class="info" data-v-33863c7e><div title="作者" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/Muyun99" target="_blank" title="作者" class="beLink" data-v-33863c7e>Muyun99</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2021-08-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          图像检索orReID 竞赛的 Tricks
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="bag-of-tricks-and-a-strong-baseline-for-deep-person-re-identification"><a href="#bag-of-tricks-and-a-strong-baseline-for-deep-person-re-identification" class="header-anchor">#</a> Bag of Tricks and A Strong Baseline for Deep Person Re-identification</h2> <h3 id="_01、标准的-baseline-github"><a href="#_01、标准的-baseline-github" class="header-anchor">#</a> 01、标准的 Baseline（<a href="https://github.com/Cysu/open-reid" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</h3> <ul><li>使用 ResNet50 ，加载 ImageNet 上的预训练参数，改变全连接层的维度为 N，N代表训练集中实体的数量</li> <li>随机采样 P 个实体以及每个人的 K 张图像来构建训练 batch，最终的 batch size B = PxK，论文中，将 P 设置为16，K设置为4，也就是说每个 batch 采样 16 个人，每个人采样 4 张图像（√）</li> <li>每张图像 resize 成 256 x 128，用零值 padding 了10像素，然后随机 crop 到256 x 128（√）</li> <li>每张图像以 0.5 的概率水平翻转（√）</li> <li>每张图像以 32-bit 的 [0,1] 之间的浮点数表示，利用ImageNet的均值和标准差来做归一化（√）</li> <li>模型输出 ReID 的特征 f 以及 ID 预测概率 p（√）</li> <li>ReID 特征 f 用于计算 triplet loss，ID 预测概率 p 用于计算交叉熵，triplet loss 的 margin 设置为 0.3</li> <li>Adam 优化器，初始的学习率设置为 0.00035 ，40th 和 70th 分别变为原来的0.1，一共有 120 个训练 epoch（√）</li></ul> <h3 id="_02、训练技巧"><a href="#_02、训练技巧" class="header-anchor">#</a> 02、训练技巧</h3> <p>大多数训练技巧不用改变模型结构</p> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815170829514.png" alt="image-20210815170829514"></p> <h4 id="_2-1-warmup-le-rate"><a href="#_2-1-warmup-le-rate" class="header-anchor">#</a> 2.1 Warmup Le Rate</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815171013493.png" alt="image-20210815171013493"></p> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815170958064.png" alt="image-20210815170958064"></p> <p>学习率非常关键，Warmup 能够提升网络性能，</p> <h4 id="_2-2-random-erasing-augmentation"><a href="#_2-2-random-erasing-augmentation" class="header-anchor">#</a> 2.2 Random Erasing Augmentation</h4> <p>在行人的 ReID 中常常出现遮挡问题，应用 Random Erasing 的概率是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">p_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，会选择一个方形区域 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">I_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>e</mi></msub><mo>×</mo><msub><mi>H</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">W_e \times H_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ），用随机值擦除其原值，</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> 表示原图，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">I_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示擦除的区域，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">S_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 分别代表原图尺寸和擦除区域的尺寸，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>e</mi></msub><mo>=</mo><msub><mi>S</mi><mi>e</mi></msub><mi mathvariant="normal">/</mi><mi>S</mi></mrow><annotation encoding="application/x-tex">r_e = S_e/S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> 表示擦除区域比例。</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>e</mi></msub></mrow><annotation encoding="application/x-tex">r_e</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 一般是随机在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">r_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">r_2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 之间变动，本文的设置如下：</p> <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>e</mi></msub><mo>=</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">p_e=0.5</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0.5</span></span></span></span></li> <li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.02</mn><mo>&lt;</mo><msub><mi>S</mi><mi>e</mi></msub><mo>&lt;</mo><mn>0.4</mn></mrow><annotation encoding="application/x-tex">0.02&lt;S_e&lt;0.4</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">0.02</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0.4</span></span></span></span></li> <li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub><mo>=</mo><mn>0.3</mn><mo separator="true">,</mo><msub><mi>r</mi><mn>2</mn></msub><mo>=</mo><mn>3.33</mn></mrow><annotation encoding="application/x-tex">r_1=0.3, r_2=3.33</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0.3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3.33</span></span></span></span></li></ul> <h4 id="_2-3-label-smoothing"><a href="#_2-3-label-smoothing" class="header-anchor">#</a> 2.3 Label Smoothing</h4> <p>ID Embedding Network 是行人 ReID 中一个基础的 baseline，因为常用的交叉熵损失是计算输出的ID label 与真实 ID label 之间的损失，称之为 ID loss，其使用 Label Smoothing 是有帮助的</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span></span></span></span> 是一个小的常量来鼓励模型对训练集更加不自信，本文设置其为 0.1，当训练集不是很大时，LS 可以显著提升模型性能</p> <h4 id="_2-4-last-stride"><a href="#_2-4-last-stride" class="header-anchor">#</a> 2.4 Last Stride</h4> <p>将 last stride 从 2 改为 1，可以提升特征图的尺寸，以 ResNet 为例，可以从 8x4 得到 16x8 的特征图，更高的空间分辨率可以带来十分显著的改进</p> <h4 id="_2-5-bnn-neck"><a href="#_2-5-bnn-neck" class="header-anchor">#</a> 2.5 BNN Neck</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815172619030.png" alt="image-20210815172619030"></p> <p>常用的 ReID 模型都会结合 ID loss 以及 triplet loss 来训练，在标准的 baseline 中，ID loss 和 triplet loss 约束同一个特征 f，但是这两个损失的目标在 embedding 空间上是不一致的</p> <p>如上图所示，Triplet loss 用于约束 feature <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">f_t</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，ID loss 用于约束 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，最终在推理的时候使用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p> <p>BNN neck 只在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">f_t</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 后面加了一层 BN 层，余弦距离比欧氏距离更好</p> <h4 id="_2-6-center-loss"><a href="#_2-6-center-loss" class="header-anchor">#</a> 2.6 Center loss</h4> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi>T</mi><mi>r</mi><mi>i</mi></mrow></msub><mo>=</mo><mo stretchy="false">[</mo><msub><mi>d</mi><mi>p</mi></msub><mtext>−</mtext><msub><mi>d</mi><mi>n</mi></msub><mo>+</mo><mi>α</mi><msub><mo stretchy="false">]</mo><mo>+</mo></msub></mrow><annotation encoding="application/x-tex">L_{Tri}= [d_p−d_n+ α ]_+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord">−</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></p> <p>Triplet Loss 如上式，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">d_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">d_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 分别表示正样本对和负样本对的特征距离，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> 表示 triplet loss 的 margin ，本文设置为 0.3。Triplet loss 只考虑了特征距离之间的不同，忽略了其绝对值的大小</p> <ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo>=</mo><mn>0.3</mn><mo separator="true">,</mo><mi>d</mi><mi>n</mi><mo>=</mo><mn>0.5</mn><mo separator="true">,</mo><msub><mi>L</mi><mrow><mi>T</mi><mi>r</mi><mi>i</mi></mrow></msub><mo>=</mo><mn>0.1</mn></mrow><annotation encoding="application/x-tex">dp= 0.3, dn= 0.5, L_{Tri} =0.1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0.3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">0.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0.1</span></span></span></span></li> <li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo>=</mo><mn>1.3</mn><mo separator="true">,</mo><mi>d</mi><mi>n</mi><mo>=</mo><mn>1.5</mn><mo separator="true">,</mo><msub><mi>L</mi><mrow><mi>T</mi><mi>r</mi><mi>i</mi></mrow></msub><mo>=</mo><mn>0.1</mn></mrow><annotation encoding="application/x-tex">dp= 1.3, dn= 1.5, L_{Tri}=0.1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1.3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1.5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0.1</span></span></span></span></li></ul> <p><span title="ParseError: KaTeX parse error: Expected group after &amp;#039;_&amp;#039; at position 20: …\frac{1}{2}\sum_̲\limits{j=1}^{B…" class="katex-error">L_C=\frac{1}{2}\sum_\limits{j=1}^{B}||f_{t_j}−c_{y_j}||_2^2</span></p> <p>上图是 Center loss，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">y_j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 是 mini-batch 中第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 个图像的标签。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><msub><mi>y</mi><mi>j</mi></msub></msub></mrow><annotation encoding="application/x-tex">c_{y_j}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7778799999999999em;vertical-align:-0.34731999999999996em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.34731999999999996em;"><span></span></span></span></span></span></span></span></span></span> 表示深度特征的第 i 个类别中心。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> 是批量大小的数量。该公式有效地表征了类内变化。最小化中心损失会增加类内的紧凑性。</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><msub><mi>L</mi><mrow><mi>I</mi><mi>D</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow><mi>T</mi><mi>r</mi><mi>i</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>+</mo><mi>β</mi><msub><mi>L</mi><mi>C</mi></msub></mrow><annotation encoding="application/x-tex">L=L_{ID}+L_{Triplet}+βL_C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">pl</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p> <p>我们的模型总共包含了上式三个损失，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span> 设置为 0.0005</p> <h4 id="_2-7-reranking"><a href="#_2-7-reranking" class="header-anchor">#</a> 2.7 Reranking</h4> <h3 id="_03、实验分析"><a href="#_03、实验分析" class="header-anchor">#</a> 03、实验分析</h3> <h4 id="_3-1-每个-trick-的有效性"><a href="#_3-1-每个-trick-的有效性" class="header-anchor">#</a> 3.1 每个 Trick 的有效性</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815174316420.png" alt="image-20210815174316420"></p> <h4 id="_3-2-bnn-neck-的有效性"><a href="#_3-2-bnn-neck-的有效性" class="header-anchor">#</a> 3.2 BNN Neck 的有效性</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815174339408.png" alt="image-20210815174339408"></p> <h4 id="_3-3-不同-batch-size-的有效性"><a href="#_3-3-不同-batch-size-的有效性" class="header-anchor">#</a> 3.3 不同 batch_size 的有效性</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815174422431.png" alt="image-20210815174422431"></p> <h4 id="_3-4-不同-image-size-的影响"><a href="#_3-4-不同-image-size-的影响" class="header-anchor">#</a> 3.4 不同 Image Size 的影响</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815174510829.png" alt="image-20210815174510829"></p> <p>875 x 606</p> <p>384 267</p> <p>384 192</p> <h4 id="_3-5-不同-backbone-的影响"><a href="#_3-5-不同-backbone-的影响" class="header-anchor">#</a> 3.5 不同 Backbone 的影响</h4> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/image-20210815174714180.png" alt="image-20210815174714180"></p> <h3 id="_04、参考资料"><a href="#_04、参考资料" class="header-anchor">#</a> 04、参考资料</h3> <h4 id="_4-1-本篇论文参考资料"><a href="#_4-1-本篇论文参考资料" class="header-anchor">#</a> 4.1 本篇论文参考资料</h4> <p>paper:https://ieeexplore.ieee.org/document/8930088</p> <p>code: https://github.com/michuanhaohao/reid-strong-baseline</p> <p>slides: https://drive.google.com/file/d/1h9SgdJenvfoNp9PTUxPiz5_K5HFCho-V/view</p> <h4 id="_4-2-其他代码链接"><a href="#_4-2-其他代码链接" class="header-anchor">#</a> 4.2 其他代码链接</h4> <p>IBN-Network: https://github.com/XingangPan/IBN-Net</p> <p>Pytorch ReID: https://github.com/layumi/Person_reID_baseline_pytorch</p> <p>AICity-ReID-2020: https://github.com/layumi/AICIty-reID-2020/tree/master/pytorch</p> <p>person-reid-triplet-loss-baseline: https://github.com/huanghoujing/person-reid-triplet-loss-baseline</p> <p>fast-reid: https://github.com/JDAI-CV/fast-reid</p> <p>reid-strong-baseline: https://github.com/michuanhaohao/reid-strong-baseline</p> <p>pytorch-metric-learning: https://github.com/KevinMusgrave/pytorch-metric-learning</p> <p>deep-efficient-person-reid: https://github.com/lannguyen0910/deep-efficient-person-reid</p> <p>LUPerson: https://github.com/DengpanFu/LUPerson</p> <p>person-reid-tiny-baseline: https://github.com/lulujianjie/person-reid-tiny-baseline</p> <p>Huawei_DIGIX_ImageRetri_Top2: https://github.com/lin-honghui/Huawei_DIGIX_ImageRetri_Top2</p> <p>PyRetri: https://github.com/PyRetri/PyRetri</p> <p>deep-person-reid: https://github.com/KaiyangZhou/deep-person-reid</p> <p>pytorch-center-loss: https://github.com/KaiyangZhou/pytorch-center-loss</p> <p>CurricularFace: https://github.com/HuangYG123/CurricularFace</p> <p>arcface.py: https://github.com/Tencent/TFace/blob/master/torchkit/head/distfc/arcface.py</p> <p>curricularface.py: https://github.com/Tencent/TFace/blob/master/torchkit/head/distfc/curricularface.py</p> <p>xbm 算法</p> <h3 id="_05、华为-digix-算法比赛方案学习"><a href="#_05、华为-digix-算法比赛方案学习" class="header-anchor">#</a> 05、华为 DIGIX 算法比赛方案学习</h3> <h4 id="第二名-https-zhuanlan-zhihu-com-p-303371522"><a href="#第二名-https-zhuanlan-zhihu-com-p-303371522" class="header-anchor">#</a> 第二名：https://zhuanlan.zhihu.com/p/303371522</h4> <p>代码：https://github.com/lin-honghui/Huawei_DIGIX_ImageRetri_Top2</p> <p><img src="https://pic4.zhimg.com/v2-92b562af620d3cdf1949b5a18a225057_r.jpg" alt="preview"></p> <p><strong>2.1 数据预处理</strong></p> <p>细粒度商品检索是一个较难的任务，数据预处理的目的是简化学习目标，修正样本分布、提高网络的泛化能力。</p> <p><strong>2.1.1 RescalePad</strong></p> <p>针对训练集中图像分辨率不统一问题，我们采取的策略是在保持物体形变情况下进行resize。具体操作是：padding 短边至长边相同大小，再resize到指定尺寸。</p> <p>对于本次比赛任务，越大的 patch，越有利于图像细节信息的保留，更有助于性能提升，但显存和模型大小制约着patch增长。选拔赛时使用的显卡为1080Ti小水管，网络输入patch为448，512，决赛华为提供了较大显存的V100，使用了更大的分辨率576。</p> <p><strong>2.1.2 Balance Sampler</strong></p> <p>针对数据中存在的类别不平衡问题，我们过滤了类别数少于2的样本，网络训练时，以类别为基本单位进行采样，每次采样 n 个类别，每个类别采样 m 个样本，所有类别采样，保证每个类别以相同的概率被抽样。</p> <p>实验中，不同的 n x m 采样的 batchsize 对实验结果有较大影响（2.2中讨论）。</p> <p><strong>2.1.3 DeNoise</strong></p> <p>本次比赛数据中，存在较多人为添加的高斯噪声和椒盐噪声，还有少量模式未知的噪声。噪声图像的存在会加大检索任务的难度，为降低噪声图像干扰，我们针对 gallery、query 中模式较为固定的高斯噪声、椒盐噪声图像进行离线修复。</p> <p><strong>2.1.4 数据增强</strong></p> <p>数据增强除了模拟商品颜色、旋转、形状、尺度等变化多样性外，针对2.1.3中噪声图像修复可能带来的边缘结构破坏问题（下图第2行，去噪后边缘信息被破坏），我们引入了DeGaussian和DePepper来提高网络的鲁棒性。本次比赛使用的数据增强有（示例图第1行从左到右）：IAAPerspective、ShiftScaleRotate、ChannelShuffle、RandomFlip、ColorJitter、DeGaussian、DePepper。</p> <p><img src="https://muyun-blog-pic.oss-cn-shanghai.aliyuncs.com/picgo/v2-93312657ccca0197b211dbbb9d5b1aa5_720w.jpg" alt="img"></p> <p><strong>2.2 模型和训练</strong></p> <p><strong>2.2.1 模型设计</strong></p> <p>由于比赛模型大小的限制，Backbone选择时优先考虑了参数量较少的EfficientNet和DenseNet。我们也测试过ResNet、ResNext、RegNet等网络，但在这次的数据中表现并不佳；</p> <p>Dropout 在这次的任务中提升显著，加上dropout和数据增强后，基本可以通过本地训练集acc预估线上分数。除dropout外也尝试过DropBlock、Disout等正则化方案，但因为和BNHead会发生冲突，而在之前的实验中去除BNHead是掉点的，后续没有进一步尝试。</p> <p>决赛时我们最佳单模为EfficientNet-B4，初赛时最佳单模是DenseNet169-RAG。</p> <p><strong>2.2.2 模型训练</strong></p> <p><strong>2.2.2.1 mini-batch</strong></p> <p>对于Triplet Loss 这类损失函数，增大 mini-batch，更有利于困难样本的挖掘，加速网络收敛。但显存制约着batchsize增加。我们使用XBM[4]来增大训练batch，但实验中观察到一个有趣现象：</p> <ul><li>开启XBM后，网络收敛确实加快，但并没有带来性能提升（甚至掉了一点点），在网络收敛的后期Triplet Loss依旧很高；</li> <li>训练时，先开启XBM训练一段时间后，再关闭XBM（减小了batchsize）训练则网络性能有提升；</li></ul> <p>这里我们做了两个假设，一个是小batchsize训练的网络泛化性能更加，但在后续的对比实验证明并非如此。<strong>另一个假设是训练集可能存在重复的ID，盲目增大batchsize也增大了冲突概率，所以网络性能下降，并且也可以解释Triplet Loss很高的原因</strong>。</p> <p>我们通过一个简单的实验进行验证：对于Arcface、Amsoftmax训练收敛的分类网络，全连接层的每一行都可以视为网络学到的一个类别中心，各个类别中心余弦距离表征着类别之间的相似度。设置阈值对余弦相似度较高的类别中心进行聚类可视化可以发现，训练数据集中确实存在大量的重复ID。比如 ID-1908、ID-1528、ID-363、ID-2979、ID-1475都为同款诺基亚手机，ID-770、ID-1205、ID-1082（见下图）都为同款华为手机，根据聚类结果粗略估计，大概有150～200重复商品ID，约占训练数据5～6%。</p> <p><strong>由于本次比赛不允许选手进行额外的标注，咨询了官方人员是否可以进行数据清洗也没有得到明确的答复，在确定数据集含有重复ID的情况下，我们也无法对数据集进行清洗。我们采取的方案是降低mini-batch中每次抽样的类别数n，而增大每个类别抽样数量m的方式，来降低发生冲突的概率。此外，由于重复ID的存在，Triplet Loss、Arcface等Loss margin取值也不应过大。</strong></p> <ul><li><p>BackBone： EfficientNet、DenseNet</p></li> <li><p>Pool：Generalized Mean Pooling [5]</p></li> <li><p>Head ： BNHead [1]</p></li> <li><p>Loss ： Triplet Loss + Arcface or Triplet Loss + Amsoftmax</p></li> <li><p>正则化：dropout</p></li> <li><p>其它组件：</p></li> <li><ul><li>RAG [6]</li> <li>Nonlocal [7]</li> <li>IBN [8]</li></ul></li></ul> <p><strong>2.2.2.2 实验细节</strong></p> <p>超参数：根据选拔赛A榜进行调优。</p> <ul><li>Triplet Loss：margin = 0.6，权重为1；</li> <li>Amsoftmax ： margin = 0.35，scale = 30，权重为 0.25；</li> <li>Arcface ： margin = 0.35，scale = 30，权重为 0.25；</li> <li>Dropout ： p = 0.2；</li></ul> <p>训练加速：</p> <ul><li>使用 Pytorch 1.6 自动混合精度加速；</li> <li>将 jpg 转 npy 加速IO；</li> <li>模型参数冻结：DenseNet169只解冻最后2个Stage， Efficient-B3 冻结 15/25 block，B4冻结16/31 block， b5冻结20/38 block；</li></ul> <p><strong>2.3 模型推理</strong></p> <p><strong>2.3.1 尺度增强</strong></p> <p>推理时，增大 patch 为训练阶段1.1倍，以较小的计算代价换稳定的性能提升；</p> <p><strong>2.3.2 旋转特征对齐</strong></p> <p>商品角度旋转多样，而CNN对旋转不鲁棒，推理时将图像进行多个角度旋转预测，对得到的特征进行相加。</p> <p><strong>2.3.3 多主体场景优化</strong></p> <p>比赛后期上分到瓶颈期，通过统计发现存在部分样本，所有模型检索结果Top10几乎都不一致，这部分数据大概100+张，通过可视化总结，这部分样本大多为同个图像中存在多个主体、或者主体较小背景干扰严重。由于本次比赛不能引入额外的标注，我们无法引入额外的检测器进行主体检测再检索。我们尝试在仅使用attention map进行谱聚类的情况下进行主体检测，具体操作为：对于给定图像，计算attention map后进行阈值化处理，过滤出高响应的区域，对高响应区域像素进行 k=3 对最近邻建图，然后通过图切割得到多个子图，每个子图则大概率为一个主体，对切割得到的主体所在位置，对feature map 重新Crop &amp; Pooling 再进行检索，最后对所有检测结果进行重排序。这部分优化虽然直接带来的结果提升不大，但对模型融合时提分显著。</p> <p><strong>2.4 后处理&amp;模型融合</strong></p> <p>后处理：我们只做了 K-reciprocal，在 PyRetri基础上实现GPU加速（约加速3倍）和半精度优化（32g内存以内）;</p> <p>模型融合：我们使用加权投票的融合方式，统计检索结果中top10图像出现的频率及顺序（e.g. top1权重为1，top2权重为1/2 ... ）;</p> <h4 id="第三名-https-zhuanlan-zhihu-com-p-297669395"><a href="#第三名-https-zhuanlan-zhihu-com-p-297669395" class="header-anchor">#</a> 第三名：https://zhuanlan.zhihu.com/p/297669395</h4> <p>解决思路</p> <ul><li><p>长尾分布</p></li> <li><ul><li>pk采样，每个batch里的类别数量是平衡的</li> <li>二阶段训练，这个是参考一些解决长尾数据的论文思路，先用所有数据训练，让网络尽可能的学到更多的数据，然后这时网络会倾向于预测数量多的类别，第二阶段，对数量多的类别进行欠采样，经过二阶段训练，大约提升0.2%。</li></ul></li> <li><p>目标背景多</p></li> <li><ul><li>由于比赛赛题的限制，只可以用imagenet的预训练权重，而且只提供了id标签，我们采用了弱监督切割的方法，根据热力图的响应值，设定一个阈值，然后去掉背景区域，大约提升0.6%</li></ul></li> <li><p>测试集加入旋转，翻转等干扰操作</p></li> <li><ul><li>加入旋转操作，好多正常的图片，例如冰箱，成了横向放置，和正常情况不一样。我们也相应的训练阶段和测试阶段加入了翻转和旋转操作，验证集提升2%，由于提交次数有限，测试集没有经过验证。</li></ul></li> <li><p>类内差异大，类间差异小</p></li> <li><ul><li>用的经典的softmax+triplet训练，为了扩大难样本挖掘，我们还使用了xbm算法，辅助triplet训练。其实有尝试过其他sota loss，可能是参数不太合适，最后是softmax+triplet效果最好</li></ul></li></ul> <p>trick</p> <ul><li>gem</li> <li>rerank</li> <li>bnneck</li> <li>channle shuffle</li> <li>batchdrop</li> <li>随机擦除</li> <li>混合精度训练</li></ul> <p>模型</p> <ul><li>resnest101</li> <li>resnest50</li> <li>res2net101</li></ul> <p>集成</p> <ul><li>我们用了六个模型，然后采用距离平均方法，我们也采用了投票法和concat形式，发现距离加权更好一些。</li></ul> <p>加权算法:</p> <ul><li><p>投票法</p></li> <li><p>concat 形式</p></li> <li><p>距离加权（√）</p></li></ul></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/08/17, 18:07:06</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e518f8/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">kaggle-Classify Leaves 竞赛方案学习</div></a> <a href="/pages/9f35c1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">kaggle-CowBoy Outfits Detection 竞赛方案学习</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e518f8/" class="prev">kaggle-Classify Leaves 竞赛方案学习</a></span> <span class="next"><a href="/pages/9f35c1/">kaggle-CowBoy Outfits Detection 竞赛方案学习</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/eb7136/"><div>Structured Knowledge Distillation for Semantic Segmentation</div></a> <span>06-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/83977c/"><div>README 美化</div></a> <span>05-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/53d32c/"><div>常见 Tricks 代码片段</div></a> <span>05-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:yundoo99@gmail.com" title="发邮件" target="_blank" class="iconfont icon-mail"></a><a href="https://github.com/muyun99" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://muyun.work" title="博客" target="_blank" class="iconfont icon-Blog"></a><a href="https://music.163.com/#/playlist?id=713385758" title="听音乐" target="_blank" class="iconfont icon-icon-test"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>Muyun99 | <a href="https://github.com/Muyun99/Wiki/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2164cc85.js" defer></script><script src="/assets/js/2.3a0f33d3.js" defer></script><script src="/assets/js/103.e0fad8e4.js" defer></script>
  </body>
</html>